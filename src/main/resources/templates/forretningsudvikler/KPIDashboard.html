<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPI Dashboard</title>
    <!-- CSS -->
    <link rel="stylesheet" href="/forretningsudvikler/KPIDashboardfrontpage.css">
</head>
<body>
<header>
    <h1>KPI Dashboard</h1>
</header>

<div class="sidebar">
    <h2>Bilabonnement A/S</h2>
    <ul>
        <li><a href="/forretningsudvikler/KPIDashboard">Dashboard</a></li>
        <li><a href="/forretningsudvikler/BilopkobOversigt">Bilopkøb - Oversigt</a></li>
        <li><a href="/forretningsudvikler/LejekontraktOversigt">Lejekontrakt - Oversigt</a></li>
    </ul>
</div>

<main>
    <!-- Aktive udlejninger -->
    <section class="kpi">
        <h2>Aktive Lejekontrakter</h2>
        <div class="kpi-value" th:text="${rentedCars}">0</div>
    </section>

    <!-- Antal lejekontrakter -->
    <section class="kpi">
        <h2>Antal Lejekontrakter</h2>
        <div class="kpi-value" th:text="${rentedCarsOverall}">0</div>
    </section>

    <!-- Top 5 Mest Udlejede Biler -->
    <section class="top-rented-cars">
        <h2>Top 5 Mest Udlejede Biler (All Time)</h2>
        <table>
            <thead>
            <tr>
                <th>Brand</th>
                <th>Antal Udlejninger</th>
            </tr>
            </thead>
            <tbody>
            <!-- Iterér over topRentedCarBrands -->
            <tr th:each="car : ${topRentedCarBrands}">
                <td th:text="${car['brand']}">Brand</td>
                <td th:text="${car['rental_count']}">0</td>
            </tr>
            </tbody>
        </table>
    </section>

    <!-- Månedlig Indtjening -->
    <section class="monthly-earnings">
        <h2>Månedlig Indtjening (Denne Måned)</h2>
        <div class="earnings-value" th:text="${monthlyEarnings}">0 DKK</div>
    </section>

    <!-- Returnerede Biler -->
    <section class="returned-cars">
        <h2>Returnerede Biler</h2>
        <form action="/forretningsudvikler/returnedCars" method="get">
            <label for="end_date">Vælg en dato:</label>
            <input type="date" id="end_date" name="end_date" required>
            <button type="submit">Vis Returnerede Biler</button>
        </form>
    </section>

    <section class ="Procentage">
        <h2>Bestand af biler </h2>
        <div class="notification" th:if="${notification}"  th:text="${notification}" th:style="'color: ' + ${color}" ></div>

    </section>

    <section class="total-earnings">
        <h2>Total Indtjening</h2>
        <div class="earnings-value" th:text="${totalEarnings}">0 DKK</div>
    </section>
</main>